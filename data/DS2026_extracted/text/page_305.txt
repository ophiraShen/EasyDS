第7章查
找
293
若父结点=.p是爷结点=.p.p的右孩子，则还有两种对称的情况：RL（先右旋，再左旋）和
RR（左单旋），这里不再赘述。红黑树的调整方法和AVL树的调整方法有异曲同工之妙。
情况3：=的叔结点y是红色的。
情况3（=是左孩子或右孩子无影响），=的父结点=.p和叔结点y都是红色的，因为爷结点
=.p.p 是黑色的，将=.p 和y 都着为黑色，将=.p.p 着为红色，以在局部保持性质④和③。然后，把
=.p.p作为新结点=来重复循环，指针=在树中上移两层。调整方式如图7.20所示。
新结点
(a)
R
黑结点
红结点
图7.20情况3的调整方式
若父结点=.p是爷结点=.P.p的右孩子，也还有两种对称的情况，不再赘述。
只要满足情况3的条件，就会不断循环，每次循环指针z都会上移两层，直到满足2）（表示
=上移到根结点）或情况1或情况2的条件。
可能的疑问：虽然插入的初始位置一定是红黑树的某个叶结点，但因为在情况3中，结点=
存在不断上升的可能，所以对于三种情况，结点：都有存在子树的可能。
以图7.21(a)中的红黑树为例（虚线表示插入后的状态），先后插入5、4和12的过程如图7.21
所示。插入5，为情况3，将5的父结点3和叔结点10着为黑色，将5的爷结点变为红色，此时
因为7已是根，所以又重新着为黑色，树的黑高加1，结束。插入4，为情况1的对称情况（RL），
此时特别注意虚构黑色空结点的存在，先对以5为根的子树做右旋；转变为情况2的对称情况
（RR），交换3和4的颜色，再对以4为根的子树做左旋，结束。插入12，父结点是黑色的，无
须任何调整，结束。
空结点
情况3
因7为根
黑结点
(10
3
10
将7着为黑色
红结点
将3和10着为黑色
树的黑高加！
5
将7着为红色
(a)插入5
(b）第一步调整
（c)第二步调整，插入4
情况1的对称情况（RL）
情况2的对称情况（RR）
对5做右旋
交换3和4的颜色
对3做左旋
(d）第一步调整
(e)第二步调整，插入12
图7.21红黑树的插入过程
